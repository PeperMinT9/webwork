<!DOCTYPE html>
<html lang="en">

<head>
    <title>Bootstrap Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://code.jquery.com/jquery-3.6.3.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <style>
        img.small_photo {
            width: 100px;
            height: 100px;
            border-radius: 100px;
            cursor: pointer;
        }
        th, td {
            width: 150px;
            text-align: center;
        }
    </style>

    <script>
        $(function() {
            $("img.small_photo").click(function() {
                $("h4.modal-title").text($(this).parent().siblings().eq(1).text())
                let a = parseInt($(this).parent().prev().text())
                $("div.modal-body img").attr("src", $(this).attr("src"))
                $("#pre_price").html("원래가격: <strike>" + a * 1.25 +"원</strike>")
                $("#price").html(`할인가격: <b style='text-size: 50px; color: red;'>${a}원</b>`)
            })
        })
    </script>

</head>

<body>
    <table class="table-bordered">
        <thead>
            <tr>
                <th>번호</th>
                <th>음식이름</th>
                <th>가격</th>
                <th>사진</th>
            </tr>
        </thead>
        <tbody>
            <script>
                let food_data = {
                    "foodlist" : [
                        {"foodname" : "에그센드위치", "foodprice" : "11000", "foodsrc" : "../photo/00.jpg"},
                        {"foodname" : "햄센드위치", "foodprice" : "21000", "foodsrc" : "../photo/01.jpg"},
                        {"foodname" : "치즈베이글", "foodprice" : "15000", "foodsrc" : "../photo/02.jpg"},
                        {"foodname" : "가든샐러드", "foodprice" : "18000", "foodsrc" : "../photo/03.jpg"},
                        {"foodname" : "당근케이크", "foodprice" : "9000", "foodsrc" : "../photo/04.jpg"}
                    ]
                }
        
                $.each(food_data.foodlist, function(idx, item) {
                    let s = "<tr>"
                    s += 
                    `
                        <td>${idx}</td>
                        <td>${item.foodname}</td>
                        <td>${item.foodprice}</td>
                        <td><img src='${item.foodsrc}' class='small_photo'
                            data-bs-toggle="modal" data-bs-target="#myFoodModal"></td>
                    `
                    s += "</tr>"
                    document.write(s)
                })
                
            </script>
        </tbody>
    </table>

    <script>
        $(".class_photo")
    </script>

    <!-- <div class="container mt-3">
        <h3>Modal Example</h3>
        <p>Click on the button to open the modal.</p>

        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#myModal">
            Open modal
        </button>
    </div> -->

    <!-- The Modal -->
    <div class="modal" id="myFoodModal">
        <div class="modal-dialog">
            <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">Modal Heading</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">
                    <img src="" width="400px" height="400px">
                    <br>
                    <h4 id="pre_price"></h4><br>
                    <h3 id="price"></h3>
                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
                </div>

            </div>
        </div>
    </div>


</body>

</html>